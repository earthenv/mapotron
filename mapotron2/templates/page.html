<!DOCTYPE html>
<!--
An example web page that creates and displays a custom Google Maps API Map Type
for Earth Engine map tiles.  See Google Maps documentation on Custom Map Types
for details.
-->
<html>
  <head>
    <title>{{collection.title}}</title>
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; }
      #map { width: 100%; height: 100%; }
  </style>
  </head>
  <body >
    <!-- <h1>
      {{collection.title}} - <span>
        {{layer.title}}
      </span>
    </h1> -->
    <!-- The element into which we render the Google Map. -->
    <div id="map"></div>
    <!-- <pre id="layer"></pre> -->

    <!-- Load compiled Earth Engine JavaScript client library. -->
    <script src="/static/ee_api_js.js"></script>

    <!-- Load our JavaScript file. -->
    <script src="/static/script.js"></script>

    <!-- Create a callback to boot our application. -->
    <script>
      // This function will run after the Google Maps API has finished leading,
      // as specified by the &callback=initMap parameter in the Maps API script
      // URL (below).
      var initMap = function() {
        // The values of mapid and token for the map tiles, generated by Earth
        // Engine using the Python script server.py, are injected here using
        // the Jinja2 templating engine.
        initialize('{{ map.mapid }}', '{{ map.token }}');
      };
    </script>
    <script>
      // document.getElementById('layer').innerHTML = JSON.stringify({{layer | tojson}}, null, 2)
    </script>

    <!-- Load the Google Maps API, and run the initMap() callback when finished. -->
    <script src="https://maps.googleapis.com/maps/api/js?key={{config.GMAPS_KEY}}&callback=initMap"
            async defer></script>
  </body>
</html>